<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Termination Conditions · NonlinearSolve.jl</title><meta name="title" content="Termination Conditions · NonlinearSolve.jl"/><meta property="og:title" content="Termination Conditions · NonlinearSolve.jl"/><meta property="twitter:title" content="Termination Conditions · NonlinearSolve.jl"/><meta name="description" content="Documentation for NonlinearSolve.jl."/><meta property="og:description" content="Documentation for NonlinearSolve.jl."/><meta property="twitter:description" content="Documentation for NonlinearSolve.jl."/><meta property="og:url" content="https://docs.sciml.ai/NonlinearSolve/stable/basics/TerminationCondition/"/><meta property="twitter:url" content="https://docs.sciml.ai/NonlinearSolve/stable/basics/TerminationCondition/"/><link rel="canonical" href="https://docs.sciml.ai/NonlinearSolve/stable/basics/TerminationCondition/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="NonlinearSolve.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NonlinearSolve.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">NonlinearSolve.jl: High-Performance Unified Nonlinear Solvers</a></li><li><a class="tocitem" href="../../tutorials/getting_started/">Getting Started with Nonlinear Rootfinding in Julia</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/code_optimization/">Code Optimization for Small Nonlinear Systems</a></li><li><a class="tocitem" href="../../tutorials/large_systems/">Handling Large Ill-Conditioned and Sparse Systems</a></li><li><a class="tocitem" href="../../tutorials/modelingtoolkit/">Symbolic System Definition and Acceleration via ModelingToolkit</a></li><li><a class="tocitem" href="../../tutorials/small_compile/">Faster Startup and and Static Compilation</a></li><li><a class="tocitem" href="../../tutorials/termination_conditions/">More Detailed Termination Conditions</a></li><li><a class="tocitem" href="../../tutorials/iterator_interface/">Nonlinear Solver Iterator Interface</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../NonlinearProblem/">Nonlinear Problems</a></li><li><a class="tocitem" href="../NonlinearFunctions/">NonlinearFunctions and Jacobian Types</a></li><li><a class="tocitem" href="../solve/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../NonlinearSolution/">Nonlinear Solutions</a></li><li class="is-active"><a class="tocitem" href>Termination Conditions</a><ul class="internal"><li><a class="tocitem" href="#Termination-Condition-API"><span>Termination Condition API</span></a></li></ul></li><li><a class="tocitem" href="../FAQ/">Frequently Asked Questions</a></li></ul></li><li><span class="tocitem">Solver Summaries and Recommendations</span><ul><li><a class="tocitem" href="../../solvers/NonlinearSystemSolvers/">Nonlinear System Solvers</a></li><li><a class="tocitem" href="../../solvers/BracketingSolvers/">Interval Rootfinding Methods (Bracketing Solvers)</a></li><li><a class="tocitem" href="../../solvers/SteadyStateSolvers/">Steady State Solvers</a></li><li><a class="tocitem" href="../../solvers/NonlinearLeastSquaresSolvers/">Nonlinear Least Squares Solvers</a></li></ul></li><li><span class="tocitem">Detailed Solver APIs</span><ul><li><a class="tocitem" href="../../api/nonlinearsolve/">NonlinearSolve.jl Native Solvers</a></li><li><a class="tocitem" href="../../api/simplenonlinearsolve/">SimpleNonlinearSolve.jl</a></li><li><a class="tocitem" href="../../api/minpack/">MINPACK.jl</a></li><li><a class="tocitem" href="../../api/nlsolve/">NLsolve.jl</a></li><li><a class="tocitem" href="../../api/sundials/">Sundials.jl</a></li><li><a class="tocitem" href="../../api/steadystatediffeq/">SteadyStateDiffEq.jl</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href>Termination Conditions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Termination Conditions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/NonlinearSolve.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/NonlinearSolve.jl/blob/master/docs/src/basics/TerminationCondition.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="termination_condition"><a class="docs-heading-anchor" href="#termination_condition">Termination Conditions</a><a id="termination_condition-1"></a><a class="docs-heading-anchor-permalink" href="#termination_condition" title="Permalink"></a></h1><p>Provides a API to specify termination conditions for <a href="../NonlinearProblem/#SciMLBase.NonlinearProblem"><code>NonlinearProblem</code></a> and <a href="../NonlinearProblem/#SciMLBase.SteadyStateProblem"><code>SteadyStateProblem</code></a>. For details on the various termination modes, i.e., NLSolveTerminationMode, see the documentation for <a href="#DiffEqBase.NLSolveTerminationCondition"><code>NLSolveTerminationCondition</code></a>.</p><h2 id="Termination-Condition-API"><a class="docs-heading-anchor" href="#Termination-Condition-API">Termination Condition API</a><a id="Termination-Condition-API-1"></a><a class="docs-heading-anchor-permalink" href="#Termination-Condition-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NLSolveTerminationCondition" href="#DiffEqBase.NLSolveTerminationCondition"><code>DiffEqBase.NLSolveTerminationCondition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NLSolveTerminationCondition(mode; abstol::T = 1e-8, reltol::T = 1e-6,
                            protective_threshold = 1e3, patience_steps::Int = 30,
                            patience_objective_multiplier = 3, min_max_factor = 1.3)</code></pre><p>Define the termination criteria for the NonlinearProblem or SteadyStateProblem.</p><p><strong>Termination Conditions</strong></p><p><strong>Termination on Absolute Tolerance</strong></p><ul><li><code>NLSolveTerminationMode.Abs</code>: Terminates if <span>$all \left( | \frac{\partial u}{\partial t} | \leq abstol \right)$</span></li><li><code>NLSolveTerminationMode.AbsNorm</code>: Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq abstol$</span></li><li><code>NLSolveTerminationMode.AbsSafe</code>: Essentially <code>abs_norm</code> + terminate if there has been no improvement for the last 30 steps + terminate if the solution blows up (diverges)</li><li><code>NLSolveTerminationMode.AbsSafeBest</code>: Same as <code>NLSolveTerminationMode.AbsSafe</code> but uses the best solution found so far, i.e. deviates only if the solution has not converged</li></ul><p><strong>Termination on Relative Tolerance</strong></p><ul><li><code>NLSolveTerminationMode.Rel</code>: Terminates if <span>$all \left(| \frac{\partial u}{\partial t} | \leq reltol \times | u | \right)$</span></li><li><code>NLSolveTerminationMode.RelNorm</code>: Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq reltol \times \| \frac{\partial u}{\partial t} + u \|$</span></li><li><code>NLSolveTerminationMode.RelSafe</code>: Essentially <code>rel_norm</code> + terminate if there has been no improvement for the last 30 steps + terminate if the solution blows up (diverges)</li><li><code>NLSolveTerminationMode.RelSafeBest</code>: Same as <code>NLSolveTerminationMode.RelSafe</code> but uses the best solution found so far, i.e. deviates only if the solution has not converged</li></ul><p><strong>Termination using both Absolute and Relative Tolerances</strong></p><ul><li><code>NLSolveTerminationMode.Norm</code>: Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq reltol \times \| \frac{\partial u}{\partial t} + u \|$</span> or <span>$\| \frac{\partial u}{\partial t} \| \leq abstol$</span></li><li><code>NLSolveTerminationMode.SteadyStateDefault</code>: Check if all values of the derivative is close to zero wrt both relative and absolute tolerance. This is usable for small problems but doesn&#39;t scale well for neural networks.</li><li><code>NLSolveTerminationMode.NLSolveDefault</code>: Check if all values of the derivative is close to zero wrt both relative and absolute tolerance. Or check that the value of the current and previous state is within the specified tolerances. This is usable for small problems but doesn&#39;t scale well for neural networks.</li></ul><p><strong>General Arguments</strong></p><ul><li><code>abstol</code>: Absolute Tolerance</li><li><code>reltol</code>: Relative Tolerance</li></ul><p><strong>Arguments specific to <code>*Safe*</code> modes</strong></p><ul><li><code>protective_threshold</code>: If the objective value increased by this factor wrt initial objective terminate immediately.</li><li><code>patience_steps</code>: If objective is within <code>patience_objective_multiplier</code> factor of the criteria and no improvement within <code>min_max_factor</code> has happened then terminate.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.133.1/src/termination_conditions.jl#L63">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../NonlinearSolution/">« Nonlinear Solutions</a><a class="docs-footer-nextpage" href="../FAQ/">Frequently Asked Questions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.1 on <span class="colophon-date" title="Friday 20 October 2023 17:17">Friday 20 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
