<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Termination Conditions · NonlinearSolve.jl</title><meta name="title" content="Termination Conditions · NonlinearSolve.jl"/><meta property="og:title" content="Termination Conditions · NonlinearSolve.jl"/><meta property="twitter:title" content="Termination Conditions · NonlinearSolve.jl"/><meta name="description" content="Documentation for NonlinearSolve.jl."/><meta property="og:description" content="Documentation for NonlinearSolve.jl."/><meta property="twitter:description" content="Documentation for NonlinearSolve.jl."/><meta property="og:url" content="https://docs.sciml.ai/NonlinearSolve/stable/basics/TerminationCondition/"/><meta property="twitter:url" content="https://docs.sciml.ai/NonlinearSolve/stable/basics/TerminationCondition/"/><link rel="canonical" href="https://docs.sciml.ai/NonlinearSolve/stable/basics/TerminationCondition/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="NonlinearSolve.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NonlinearSolve.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">NonlinearSolve.jl: High-Performance Unified Nonlinear Solvers</a></li><li><a class="tocitem" href="../../tutorials/getting_started/">Getting Started with Nonlinear Rootfinding in Julia</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/code_optimization/">Code Optimization for Small Nonlinear Systems</a></li><li><a class="tocitem" href="../../tutorials/large_systems/">Handling Large Ill-Conditioned and Sparse Systems</a></li><li><a class="tocitem" href="../../tutorials/modelingtoolkit/">Symbolic System Definition and Acceleration via ModelingToolkit</a></li><li><a class="tocitem" href="../../tutorials/small_compile/">Faster Startup and and Static Compilation</a></li><li><a class="tocitem" href="../../tutorials/iterator_interface/">Nonlinear Solver Iterator Interface</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../NonlinearProblem/">Nonlinear Problems</a></li><li><a class="tocitem" href="../NonlinearFunctions/">NonlinearFunctions and Jacobian Types</a></li><li><a class="tocitem" href="../solve/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../NonlinearSolution/">Nonlinear Solutions</a></li><li class="is-active"><a class="tocitem" href>Termination Conditions</a><ul class="internal"><li><a class="tocitem" href="#Termination-Conditions"><span>Termination Conditions</span></a></li><li><a class="tocitem" href="#[Deprecated]-Termination-Condition-API"><span>[Deprecated] Termination Condition API</span></a></li></ul></li><li><a class="tocitem" href="../FAQ/">Frequently Asked Questions</a></li></ul></li><li><span class="tocitem">Solver Summaries and Recommendations</span><ul><li><a class="tocitem" href="../../solvers/NonlinearSystemSolvers/">Nonlinear System Solvers</a></li><li><a class="tocitem" href="../../solvers/BracketingSolvers/">Interval Rootfinding Methods (Bracketing Solvers)</a></li><li><a class="tocitem" href="../../solvers/SteadyStateSolvers/">Steady State Solvers</a></li><li><a class="tocitem" href="../../solvers/NonlinearLeastSquaresSolvers/">Nonlinear Least Squares Solvers</a></li><li><a class="tocitem" href="../../solvers/LineSearch/">Line Search</a></li></ul></li><li><span class="tocitem">Detailed Solver APIs</span><ul><li><a class="tocitem" href="../../api/nonlinearsolve/">NonlinearSolve.jl Native Solvers</a></li><li><a class="tocitem" href="../../api/simplenonlinearsolve/">SimpleNonlinearSolve.jl</a></li><li><a class="tocitem" href="../../api/minpack/">MINPACK.jl</a></li><li><a class="tocitem" href="../../api/nlsolve/">NLsolve.jl</a></li><li><a class="tocitem" href="../../api/sundials/">Sundials.jl</a></li><li><a class="tocitem" href="../../api/steadystatediffeq/">SteadyStateDiffEq.jl</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href>Termination Conditions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Termination Conditions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/NonlinearSolve.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/NonlinearSolve.jl/blob/master/docs/src/basics/TerminationCondition.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="termination_condition"><a class="docs-heading-anchor" href="#termination_condition">Termination Conditions</a><a id="termination_condition-1"></a><a class="docs-heading-anchor-permalink" href="#termination_condition" title="Permalink"></a></h1><p>Provides a API to specify termination conditions for <a href="../NonlinearProblem/#SciMLBase.NonlinearProblem"><code>NonlinearProblem</code></a> and <a href="../NonlinearProblem/#SciMLBase.SteadyStateProblem"><code>SteadyStateProblem</code></a>. For details on the various termination modes:</p><h2 id="Termination-Conditions"><a class="docs-heading-anchor" href="#Termination-Conditions">Termination Conditions</a><a id="Termination-Conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Termination-Conditions" title="Permalink"></a></h2><p>The termination condition is constructed as:</p><pre><code class="language-julia hljs">cache = init(du, u, AbsNormTerminationMode(); abstol = 1e-9, reltol = 1e-9)</code></pre><p>If <code>abstol</code> and <code>reltol</code> are not supplied, then we choose a default based on the element types of <code>du</code> and <code>u</code>.</p><p>We can query the <code>cache</code> using <code>DiffEqBase.get_termination_mode</code>, <code>DiffEqBase.get_abstol</code> and <code>DiffEqBase.get_reltol</code>.</p><p>To test for termination simply call the <code>cache</code>:</p><pre><code class="language-julia hljs">terminated = cache(du, u, uprev)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The default for NonlinearSolve.jl is <code>AbsSafeBestTerminationMode</code>!</p></div></div><h3 id="Absolute-Tolerance"><a class="docs-heading-anchor" href="#Absolute-Tolerance">Absolute Tolerance</a><a id="Absolute-Tolerance-1"></a><a class="docs-heading-anchor-permalink" href="#Absolute-Tolerance" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.AbsTerminationMode" href="#DiffEqBase.AbsTerminationMode"><code>DiffEqBase.AbsTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbsTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Terminates if <span>$all \left( | \frac{\partial u}{\partial t} | \leq abstol \right)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.AbsNormTerminationMode" href="#DiffEqBase.AbsNormTerminationMode"><code>DiffEqBase.AbsNormTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbsNormTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq abstol$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.AbsSafeTerminationMode" href="#DiffEqBase.AbsSafeTerminationMode"><code>DiffEqBase.AbsSafeTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbsSafeTerminationMode &lt;: AbstractSafeNonlinearTerminationMode</code></pre><p>Essentially <a href="#DiffEqBase.AbsNormTerminationMode"><code>AbsNormTerminationMode</code></a> + terminate if there has been no improvement for the last <code>patience_steps</code> + terminate if the solution blows up (diverges).</p><p><strong>Constructor</strong></p><pre><code class="language-julia hljs">AbsSafeTerminationMode(; protective_threshold = 1e3, patience_steps = 100,
                        patience_objective_multiplier = 3, min_max_factor = 1.3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L130">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.AbsSafeBestTerminationMode" href="#DiffEqBase.AbsSafeBestTerminationMode"><code>DiffEqBase.AbsSafeBestTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbsSafeBestTerminationMode &lt;: AbstractSafeBestNonlinearTerminationMode</code></pre><p>Essentially <a href="#DiffEqBase.AbsSafeTerminationMode"><code>AbsSafeTerminationMode</code></a>, but caches the best solution found so far.</p><p><strong>Constructor</strong></p><pre><code class="language-julia hljs">AbsSafeBestTerminationMode(; protective_threshold = 1e3, patience_steps = 100,
                            patience_objective_multiplier = 3, min_max_factor = 1.3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L171">source</a></section></article><h3 id="Relative-Tolerance"><a class="docs-heading-anchor" href="#Relative-Tolerance">Relative Tolerance</a><a id="Relative-Tolerance-1"></a><a class="docs-heading-anchor-permalink" href="#Relative-Tolerance" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.RelTerminationMode" href="#DiffEqBase.RelTerminationMode"><code>DiffEqBase.RelTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RelTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Terminates if <span>$all \left(| \frac{\partial u}{\partial t} | \leq reltol \times | u | \right)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.RelNormTerminationMode" href="#DiffEqBase.RelNormTerminationMode"><code>DiffEqBase.RelNormTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RelNormTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq reltol \times \| \frac{\partial u}{\partial t} + u \|$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.RelSafeTerminationMode" href="#DiffEqBase.RelSafeTerminationMode"><code>DiffEqBase.RelSafeTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RelSafeTerminationMode &lt;: AbstractSafeNonlinearTerminationMode</code></pre><p>Essentially <a href="#DiffEqBase.RelNormTerminationMode"><code>RelNormTerminationMode</code></a> + terminate if there has been no improvement for the last <code>patience_steps</code> + terminate if the solution blows up (diverges).</p><p><strong>Constructor</strong></p><pre><code class="language-julia hljs">RelSafeTerminationMode(; protective_threshold = 1e3, patience_steps = 100,
                         patience_objective_multiplier = 3, min_max_factor = 1.3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.RelSafeBestTerminationMode" href="#DiffEqBase.RelSafeBestTerminationMode"><code>DiffEqBase.RelSafeBestTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RelSafeBestTerminationMode &lt;: AbstractSafeBestNonlinearTerminationMode</code></pre><p>Essentially <a href="#DiffEqBase.RelSafeTerminationMode"><code>RelSafeTerminationMode</code></a>, but caches the best solution found so far.</p><p><strong>Constructor</strong></p><pre><code class="language-julia hljs">RelSafeBestTerminationMode(; protective_threshold = 1e3, patience_steps = 100,
                            patience_objective_multiplier = 3, min_max_factor = 1.3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L151">source</a></section></article><h3 id="Both-Absolute-and-Relative-Tolerance"><a class="docs-heading-anchor" href="#Both-Absolute-and-Relative-Tolerance">Both Absolute and Relative Tolerance</a><a id="Both-Absolute-and-Relative-Tolerance-1"></a><a class="docs-heading-anchor-permalink" href="#Both-Absolute-and-Relative-Tolerance" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NormTerminationMode" href="#DiffEqBase.NormTerminationMode"><code>DiffEqBase.NormTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NormTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq reltol \times \| \frac{\partial u}{\partial t} + u \|$</span> or <span>$\| \frac{\partial u}{\partial t} \| \leq abstol$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.SteadyStateDiffEqTerminationMode" href="#DiffEqBase.SteadyStateDiffEqTerminationMode"><code>DiffEqBase.SteadyStateDiffEqTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SteadyStateDiffEqTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Check if all values of the derivative is close to zero wrt both relative and absolute tolerance.</p><p>The default used in SteadyStateDiffEq.jl! Not recommended for large problems, since the convergence criteria is very strict and never reliably satisfied for most problems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L47-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.SimpleNonlinearSolveTerminationMode" href="#DiffEqBase.SimpleNonlinearSolveTerminationMode"><code>DiffEqBase.SimpleNonlinearSolveTerminationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SimpleNonlinearSolveTerminationMode &lt;: AbstractNonlinearTerminationMode</code></pre><p>Check if all values of the derivative is close to zero wrt both relative and absolute tolerance. Or check that the value of the current and previous state is within the specified tolerances.</p><p>The default used in SimpleNonlinearSolve.jl! Not recommended for large problems, since the convergence criteria is very strict and never reliably satisfied for most problems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L58-L67">source</a></section></article><h3 id="Return-Codes"><a class="docs-heading-anchor" href="#Return-Codes">Return Codes</a><a id="Return-Codes-1"></a><a class="docs-heading-anchor-permalink" href="#Return-Codes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NonlinearSafeTerminationReturnCode" href="#DiffEqBase.NonlinearSafeTerminationReturnCode"><code>DiffEqBase.NonlinearSafeTerminationReturnCode</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">NonlinearSafeTerminationReturnCode</code></pre><p>Return Codes for the safe nonlinear termination conditions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NonlinearSafeTerminationReturnCode.Success" href="#DiffEqBase.NonlinearSafeTerminationReturnCode.Success"><code>DiffEqBase.NonlinearSafeTerminationReturnCode.Success</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">NonlinearSafeTerminationReturnCode.Success</code></pre><p>Termination Condition was satisfied!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NonlinearSafeTerminationReturnCode.Default" href="#DiffEqBase.NonlinearSafeTerminationReturnCode.Default"><code>DiffEqBase.NonlinearSafeTerminationReturnCode.Default</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">NonlinearSafeTerminationReturnCode.Default</code></pre><p>Default Return Code. Used for type stability and conveys no additional information!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NonlinearSafeTerminationReturnCode.Failure" href="#DiffEqBase.NonlinearSafeTerminationReturnCode.Failure"><code>DiffEqBase.NonlinearSafeTerminationReturnCode.Failure</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">NonlinearSafeTerminationReturnCode.Failure</code></pre><p>Termination Condition was not satisfied!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NonlinearSafeTerminationReturnCode.PatienceTermination" href="#DiffEqBase.NonlinearSafeTerminationReturnCode.PatienceTermination"><code>DiffEqBase.NonlinearSafeTerminationReturnCode.PatienceTermination</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">NonlinearSafeTerminationReturnCode.PatienceTermination</code></pre><p>Terminate if there has been no improvement for the last <code>patience_steps</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NonlinearSafeTerminationReturnCode.ProtectiveTermination" href="#DiffEqBase.NonlinearSafeTerminationReturnCode.ProtectiveTermination"><code>DiffEqBase.NonlinearSafeTerminationReturnCode.ProtectiveTermination</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">NonlinearSafeTerminationReturnCode.ProtectiveTermination</code></pre><p>Terminate if the objective value increased by this factor wrt initial objective or the value diverged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L25-L30">source</a></section></article><h2 id="[Deprecated]-Termination-Condition-API"><a class="docs-heading-anchor" href="#[Deprecated]-Termination-Condition-API">[Deprecated] Termination Condition API</a><a id="[Deprecated]-Termination-Condition-API-1"></a><a class="docs-heading-anchor-permalink" href="#[Deprecated]-Termination-Condition-API" title="Permalink"></a></h2><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This is deprecated. Currently only parts of <code>SimpleNonlinearSolve</code> uses this API. That will also be phased out soon!</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiffEqBase.NLSolveTerminationCondition" href="#DiffEqBase.NLSolveTerminationCondition"><code>DiffEqBase.NLSolveTerminationCondition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NLSolveTerminationCondition(mode; abstol::T = 1e-8, reltol::T = 1e-6,
                            protective_threshold = 1e3, patience_steps::Int = 30,
                            patience_objective_multiplier = 3, min_max_factor = 1.3)</code></pre><p>Define the termination criteria for the NonlinearProblem or SteadyStateProblem.</p><p><strong>Termination Conditions</strong></p><p><strong>Termination on Absolute Tolerance</strong></p><ul><li><code>NLSolveTerminationMode.Abs</code>: Terminates if <span>$all \left( | \frac{\partial u}{\partial t} | \leq abstol \right)$</span></li><li><code>NLSolveTerminationMode.AbsNorm</code>: Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq abstol$</span></li><li><code>NLSolveTerminationMode.AbsSafe</code>: Essentially <code>abs_norm</code> + terminate if there has been no improvement for the last 30 steps + terminate if the solution blows up (diverges)</li><li><code>NLSolveTerminationMode.AbsSafeBest</code>: Same as <code>NLSolveTerminationMode.AbsSafe</code> but uses the best solution found so far, i.e. deviates only if the solution has not converged</li></ul><p><strong>Termination on Relative Tolerance</strong></p><ul><li><code>NLSolveTerminationMode.Rel</code>: Terminates if <span>$all \left(| \frac{\partial u}{\partial t} | \leq reltol \times | u | \right)$</span></li><li><code>NLSolveTerminationMode.RelNorm</code>: Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq reltol \times \| \frac{\partial u}{\partial t} + u \|$</span></li><li><code>NLSolveTerminationMode.RelSafe</code>: Essentially <code>rel_norm</code> + terminate if there has been no improvement for the last 30 steps + terminate if the solution blows up (diverges)</li><li><code>NLSolveTerminationMode.RelSafeBest</code>: Same as <code>NLSolveTerminationMode.RelSafe</code> but uses the best solution found so far, i.e. deviates only if the solution has not converged</li></ul><p><strong>Termination using both Absolute and Relative Tolerances</strong></p><ul><li><code>NLSolveTerminationMode.Norm</code>: Terminates if <span>$\| \frac{\partial u}{\partial t} \| \leq reltol \times \| \frac{\partial u}{\partial t} + u \|$</span> or <span>$\| \frac{\partial u}{\partial t} \| \leq abstol$</span></li><li><code>NLSolveTerminationMode.SteadyStateDefault</code>: Check if all values of the derivative is close to zero wrt both relative and absolute tolerance. This is usable for small problems but doesn&#39;t scale well for neural networks.</li><li><code>NLSolveTerminationMode.NLSolveDefault</code>: Check if all values of the derivative is close to zero wrt both relative and absolute tolerance. Or check that the value of the current and previous state is within the specified tolerances. This is usable for small problems but doesn&#39;t scale well for neural networks.</li></ul><p><strong>General Arguments</strong></p><ul><li><code>abstol</code>: Absolute Tolerance</li><li><code>reltol</code>: Relative Tolerance</li></ul><p><strong>Arguments specific to <code>*Safe*</code> modes</strong></p><ul><li><code>protective_threshold</code>: If the objective value increased by this factor wrt initial objective terminate immediately.</li><li><code>patience_steps</code>: If objective is within <code>patience_objective_multiplier</code> factor of the criteria and no improvement within <code>min_max_factor</code> has happened then terminate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This has been deprecated and will be removed in the next major release. Please use the new dispatch based termination conditions API.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/DiffEqBase.jl/blob/v6.138.1/src/termination_conditions.jl#L414">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../NonlinearSolution/">« Nonlinear Solutions</a><a class="docs-footer-nextpage" href="../FAQ/">Frequently Asked Questions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Monday 6 November 2023 00:44">Monday 6 November 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
